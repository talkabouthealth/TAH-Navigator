#{set pageType = 'treatmentplan' /}
#{extends 'patientmain.html' /}
<!--Start Content-->
<div id="content" class="page">

  <div class="container-fluid treatment-plan">
    <!-- Raidation Treatment -->
    <div class="title">
      <h1>Radiation Treatment</h1>
    </div>
    #{if radiationTreatments}
    
    <div class="mobile radiation-treatment">
      #{list items:radiationTreatments, as:'rt'}
      <div class="treatment-item">
        <h3>${rt.rtDto.name}</h3>
        <p><span>Dates: </span> #{if rt.startDate} ${rt.startDate.format('MM/dd/yyyy')} #{/if}
          #{if rt.endDate} - ${rt.endDate.format('MM/dd/yyyy')} #{/if}</p>
          <p><span>Dose: </span>#{if rt.dose} ${rt.dose} #{/if}</p>
          <p><span>Schedule: </span>#{if rt.rsDto} ${rt.rsDto.timePeriod} #{/if}</p>
          <p><span>Region Treated: </span>:#{if rt.trDto} ${rt.trDto.region} #{/if}</p>

          <p><span>Doctor: </span>#{if rt.doctor} ${rt.doctor} #{/if}<p>
          <p><span>Notes: </span> #{if rt.notes} ${rt.notes} #{/if}</p>
      </div>
      #{/list}
  </div>
    <table class="desktop radiation-treatment table table-bordered table-striped table-condensed table-hover">

      <thead>
      <tr>
        <th class="type">Type</th>
        <th class="dates">Dates</th>
        <th class="dose">Dose</th>
        <th class="schedule">Schedule</th>

        <th class="region-treated">Region Treated</th>
        <th>Doctor</th>
        <!--<th class="side-effects">Side Effects Experienced</th>-->
        <th class="notes">Notes</th>
      </tr>
    </thead>
    <tbody>
      #{list items:radiationTreatments, as:'rt'}

      <tr>
        <td class="type">${rt.rtDto.name}</td>
        <td class="dates">#{if rt.startDate} ${rt.startDate.format('MM/dd/yyyy')} #{/if}
          #{if rt.endDate} - ${rt.endDate.format('MM/dd/yyyy')} #{/if}
        </td>
        <td class="dose">#{if rt.dose} ${rt.dose} #{/if}</td>
        <td class="schedule">#{if rt.rsDto} ${rt.rsDto.timePeriod} #{/if}</td>

        <td class="region-treated">#{if rt.trDto} ${rt.trDto.region} #{/if}</td>
        <!--<td class="side-effects">
          #{if rt.prtSeDtos}
          #{list items: rt.prtSeDtos, as:'prtSeDto'}
          #{if prtSeDto_isFirst}
          ${prtSeDto.seDto.description}
          #{/if}
          #{else}
          , ${prtSeDto.seDto.description}
          #{/else}
          #{/list}
          #{/if}
        </td>-->
        <td>#{if rt.doctor} ${rt.doctor} #{/if}</td>
        <td class="notes">
          <div>

          #{if rt.notes} ${rt.notes} #{/if}
        </div>
        </td>
      </tr>
      #{/list}
    </tbody>
    </table>
    #{/if}
    #{else}

    <p>None</p>


    #{/else}



    <!-- Surgery -->
    <div class="title">
      <h1>Surgery</h1>


    </div>
    #{if surgeryInfo}

    <div class="surgery mobile">
      #{list items:surgeryInfo, as:'si'}
      <div class="surgery-item">
          <h3>${si.stDto.name}</h3>
          <p><span>Date: </span>#{if si.surgeryDate} ${si.surgeryDate.format('MM/dd/yyyy')} #{/if}</p>
          <p><span>Region: </span>#{if si.trDto} ${si.trDto.region} #{/if}</p>
          <p><span>Doctor: </span>#{if si.doctor} ${si.doctor} #{/if}</p>
          <p><span>Notes: </span>#{if si.notes} ${si.notes} #{/if}</p>
      </div>
      #{/list}
    </div>
    <table class="surgery desktop table table-bordered table-striped table-condensed table-hover">
      <thead>
      <tr>
        <th class="surgery-name"></th>
        <th class="dates">Date</th>
        <th class="region">Region Treated</th>
        <th>Doctor</th>
        <th class="notes">Notes</th>
      </tr>
      </thead>
      <tbody>
      #{list items:surgeryInfo, as:'si'}
      <tr>
        <td class="surgery-name">${si.stDto.name}</td>
        <td class="dates">#{if si.surgeryDate} ${si.surgeryDate.format('MM/dd/yyyy')} #{/if}</td>
        <td class="region">#{if si.trDto} ${si.trDto.region} #{/if}</td>
        <td>#{if si.doctor} ${si.doctor} #{/if}</td>
        <td class="notes"><div>#{if si.notes} ${si.notes} #{/if}</div></td>
      </tr>
      #{/list}
    </tbody>
    </table>

    #{/if}
    #{else}

    <p>None</p>

    #{/else}

    <!-- Chemotherapy Treatment -->
    <div class="title">
      <h1>Chemotherapy</h1>

    </div>
    #{if chemoTreatments}
    <div class="chemotherapy mobile">
      #{list items:chemoTreatments, as:'ct'}
      <div class="chemotherapy-item">
        <h3>${ct.genericName} (${ct.brandName})</h3>
        <p><span>Dates: </span>#{if ct.startDate} ${ct.startDate.format('MM/dd/yyyy')} #{/if}
          #{if ct.endDate} - ${ct.endDate.format('MM/dd/yyyy')} #{/if}
        </p>
        <p><span># of Cycles: </span>>#{if ct.cycleNo} ${ct.cycleNo} #{/if}</p>
        <p><span>Schedule: </span>#{if ct.csDto} ${ct.csDto.timePeriod} #{/if}</p>
        <p><span>% Dose Reduction: </span>#{if ct.doseReduction} ${ct.doseReduction} #{/if}</p>
        <p><span>Doctor: </span>#{if ct.doctor} ${ct.doctor} #{/if}</p>
        <p><span>Notes: </span>#{if ct.notes} ${ct.notes} #{/if}</p>
    </div>
      #{/list}
  </div>
    <table class="chemotherapy desktop table table-bordered table-striped table-condensed table-hover">
      <thead>
      <tr>
        <th class="treatment-name"></th>
        <th class="dates">Dates</th>
        <th class="cycles"># of Cycles</th>
        <th class="schedule">Schedule</th>
        <th class="dose-reduction">% Dose Reduction</th>

        <!--<th class="side-effects">Side Effects Experienced</th>-->
        <th>Doctor</th>
        <th class="notes">Notes</th>
      </tr>
    </thead>
    <tbody>
      #{list items:chemoTreatments, as:'ct'}

      <tr>
        <td class="treatment-name">${ct.genericName} (${ct.brandName})</td>
        <td class="dates">#{if ct.startDate} ${ct.startDate.format('MM/dd/yyyy')} #{/if}
          #{if ct.endDate} - ${ct.endDate.format('MM/dd/yyyy')} #{/if}
        </td>
        <td class="cycles">#{if ct.cycleNo} ${ct.cycleNo} #{/if}</td>
        <td class="schedule">#{if ct.csDto} ${ct.csDto.timePeriod} #{/if}</td>
        <td class="dose-reduction">#{if ct.doseReduction} ${ct.doseReduction} #{/if}</td>

        <!--<td class="side-effects">
          #{if ct.pctSeDtos}
          #{list items: ct.pctSeDtos, as:'pctSeDto'}
          #{if pctSeDto_isFirst}
          ${pctSeDto.seDto.description}
          #{/if}
          #{else}
          , ${pctSeDto.seDto.description}
          #{/else}
          #{/list}
          #{/if}
        </td>-->
        <td>#{if ct.doctor} ${ct.doctor} #{/if}</td>
        <td class="notes"><div>#{if ct.notes} ${ct.notes} #{/if}</div></td>
      </tr>
      #{/list}
    </tbody>
    </table>
    #{/if}
    #{else}
    <p>None</p>
    #{/else}
  </div>
</div>

  <script src="/public/plugins/tooltipster-master/js/jquery.tooltipster.min.js"></script>
<script src="/public/js/tableTooltips.js"></script>
<script type="text/javascript" src="/public/js/patient/treatment.js"></script>
