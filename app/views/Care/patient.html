#{set pageType = 'patient1' /}
#{extends 'caremain.html' /}
	<!--Start Content-->
	<style>
<!--
.modal-body table td, table td {padding:5px;}
.nopadding{padding:0px;}
.modal-body td:first-child {
    line-height: 40px;
    vertical-align: top;
    width: 170px !important;
}
p {
    margin: 0;
}
.td-symp,.td-graph{   
background: linear-gradient(180deg, #ff4488 50%, #ff0000 50%);
    float: left;
    height: 45px;
    margin-left: 20px;
    padding: 5px;}
    .title {
    color: #00509b;
    font-size: 20px;
}

-->
</style>
<div id="content" class="col-xs-12 col-sm-10">
	<div class="col-xs-12 col-sm-12">
		<div id="tabs">
			<ul>
				<li><a href="#tabs-1">SUMMARY</a></li>
				<li><a href="@{CarePatien.appointment(patientId)}">APPOINTMENT</a></li>
				<li><a href="@{CarePatien.careteam(patientId)}">CARE TEAM</a></li>
				<li><a href="@{CarePatien.medication(patientId)}">MEDICATIONS</a></li>
				<li><a href="@{CarePatien.treatmentPlan(patientId)}">TREATMENT PLAN</a></li>
				<li><a href="@{CarePatien.followupPlan(patientId)}">FOLLOW-UP CARE PLAN</a></li>
				<li><a href="@{CarePatien.diagnosis(patientId)}">DIAGNOSIS</a></li>
			</ul>
			<div id="tabs-1">
				<div class="col-xs-12 col-sm-12 nopadding">
					<div class="col-xs-4 col-sm-4 nopadding" style="border-right: 1px solid #CCC">
					<!-- patient area -->
					<table>
						<tr>
						<td>
							<img class="profilePic" src="@{Image.show(patientDto.id)}"  height="50">
						</td>
						<td>
							<h3>#{userName userName: patientDto.user.name, userId:patientDto.id /}</h3>
							<p class="initialism">
                        	#{if patientOtherDetails != null && patientOtherDetails.disease != null}
                        		${patientOtherDetails.disease.name}, STAGE ${patientOtherDetails.stage}
                        	#{/if}
                        	#{else}Not Added
                        	#{/else}
                        	</p>
						</td>
<!-- 						</tr><tr><td colspan="2">&nbsp;</td></tr> -->
						<tr><td colspan="2">
							<p><strong>DOB:</strong> #{if patientDto.dob != null}${patientDto.dob.format("M/d/yyyy")}#{/if}</p>
							<p><strong>Phone: </strong> ${patientDto.homePhone}</p>
						</td>
						</tr>
<!-- 						<tr><td colspan="2">&nbsp;</td></tr> -->
						<tr><td colspan="2">
							#{if patientOtherDetails != null}
                    	   		#{if patientOtherDetails.dateofdiagnosis != null}
                        		<p><strong>Date of Diagnosis:</strong> ${patientOtherDetails.dateofdiagnosis.format('dd.MM.yyyy')}</p>
                        		#{/if}
                        		<p><strong>Support Contact:</strong>support@email.com</p>
							#{/if}
							#{else}
                        		<p><strong>Date of Diagnosis:</strong> -</p>
                        		<p><strong>Support Contact:</strong>support@email.com</p>
							#{/else}
						</td>
						</tr>
<!-- 						<tr><td colspan="2">&nbsp;</td></tr> -->
						<tr><td colspan="2">
							<p><strong>Next Appointment:</strong> -</p>
							<p><strong>Last Appointment: </strong> -</p>
						</td>
						</tr>
<!-- 						<tr><td colspan="2">&nbsp;</td></tr> -->
						<tr><td colspan="2">
							<p><strong>DOCTOR:</strong> -</p>
							<p><strong>LEAD NURSE: </strong> -</p>
						</td>
						</tr>
					</table>
					</div>
					<div class="col-xs-4 col-sm-4" style="border-right: 1px solid #CCC">
						<p class="title">DISTRESS</p>
						#{if distress != null }
						<table>
							<tr><td colspan="2"> <p class="last">Last Updated <span id="timeAgo">${distress.distressDate.format('dd.MM.yyyy')}</span></p></td></tr>
							<tr>
								<td>
									<div style=" background-color: #efefef;float: left;padding: 5px 10px;">
										<span style="  background-color: #fff;float:left;color:darkred;border: 5px solid darkred;border-radius: 40px;font-size: 25px;font-weight: 700;padding: 0px 10px;">${distress.curDist}</span>
										<span style="float:left;color:darkred;font-weight: bold;padding-left: 10px;">
										#{if distress.curDist < 5}
											MILD<br/> DISTRESS
										#{/if}
										#{if distress.curDist == 5}
											MEDIUM<br/> DISTRESS
										#{/if}
										#{if distress.curDist > 5}
											SEVERE<br/> DISTRESS
										#{/if}
										</span>
										<span class="td-graph"></span>
									</div>
								</td>
							</tr>
<!-- 							<tr><td colspan="2">&nbsp;</td></tr> -->
							<tr>
								<td><p><strong>CURRENT PROBLEM LIST</strong>
								<br/>
									${distress.otherdetail.printMessage()}
								</p>
								</td>
							</tr>
<!-- 							<tr><td colspan="2">&nbsp;</td></tr> -->
							<tr>
								<td><p><strong>PAST PROBLEM LIST</strong>
								<br/>
									${distress.otherdetail.printMessage()}
								</p>
								</td>
							</tr>
						</table>	
						#{/if}
						#{else}
							No Data available
						#{/else}
					</div>
					<div class="col-xs-4 col-sm-4"><p class="title">SYMPTOMS</p>
						<table>
							<tr><td colspan="2"> <p class="last">Last Updated <span id="timeAgo">29.07.2014</span></p></td></tr>
							<tr>
								<td><p><strong>PAIN</strong></p>&nbsp;&nbsp;&nbsp;&nbsp;</td>
								<td>
								<div style=" background-color: #efefef;float: left;padding: 5px 10px;">
										<span style="  background-color: #fff;float:left;color:darkred;border: 5px solid darkred;border-radius: 40px;font-size: 25px;font-weight: 700;padding: 0px 10px;">8</span>
										<span class="td-symp"><canvas style="display: inline-block; vertical-align: top; width: 117px; height: 35px;" width="117" height="35"></canvas></span>
									</div>
								</td>
							</tr>
<!-- 							<tr><td colspan="2">&nbsp;</td></tr> -->
							<tr>
								<td><p><strong>FATIGUE</strong></p>&nbsp;&nbsp;&nbsp;&nbsp;</td>
								<td>
								<div style=" background-color: #efefef;float: left;padding: 5px 10px;">
										<span style="  background-color: #fff;float:left;color:darkred;border: 5px solid darkred;border-radius: 40px;font-size: 25px;font-weight: 700;padding: 0px 10px;">2</span>
										<span class="td-symp"><canvas style="display: inline-block; vertical-align: top; width: 117px; height: 35px;" width="117" height="35"></canvas></span>
									</div>
								</td>
							</tr>
<!-- 							<tr><td colspan="2">&nbsp;</td></tr> -->
							<tr>
								<td><p><strong>NAUSEA</strong></p>&nbsp;&nbsp;&nbsp;&nbsp;</td>
								<td>
								<div style=" background-color: #efefef;float: left;padding: 5px 10px;">
										<span style="  background-color: #fff;float:left;color:darkred;border: 5px solid darkred;border-radius: 40px;font-size: 25px;font-weight: 700;padding: 0px 10px;">7</span>
										<span class="td-symp"><canvas style="display: inline-block; vertical-align: top; width: 117px; height: 35px;" width="117" height="35"></canvas></span>
									</div>
								</td>
							</tr>
<!-- 							<tr><td colspan="2">&nbsp;</td></tr> -->
							<tr>
								<td><p><strong>SLEEP<br/>ISSUES</strong></p>&nbsp;&nbsp;&nbsp;&nbsp;</td>
								<td>
								<div style=" background-color: #efefef;float: left;padding: 5px 10px;">
										<span style=" background-color: #fff;float:left;color:darkred;border: 5px solid darkred;border-radius: 40px;font-size: 25px;font-weight: 700;padding: 0px 10px;">4</span>
										<span class="td-symp"><canvas style="display: inline-block; vertical-align: top; width: 117px; height: 35px;" width="117" height="35"></canvas></span>
									</div>
								</td>
							</tr>
						</table>
					</div>
				</div>
				<div class="col-xs-12 col-sm-12 nopadding" style="border-top: 1px solid #CCC;margin-top: 20px;padding-top: 20px;">
				<div style="padding-bottom:20px;">
				<span class="title" style="vertical-align: middle;">NOTES</span>&nbsp;&nbsp;<button class="btn btn-default btn-sm noteBtn" style="font-weight:bold;">+ NEW NOTE</button>
				</div>
				#{if noteList != null}
				<table class="col-xs-12 col-sm-12">
					#{list noteList, as:'seq'}
					<tr><td style="color: #686d73;">
						<p class="last">#{userName userName: seq.noteBy.name, userId:seq.noteBy.id /}, ${seq.noteDate.format('MM/dd/yyyy - hh:mm a')}</p>
						<p style="font-weight:bold;font-size: 15px;">${seq.noteTitle}</p>
						${seq.noteDesc}
						</td>
						<td nowrap="nowrap" style="float: right;padding-left:20px;">
							<a class="btn btn-danger-small" href="javaScript:operationNote('edit','${seq.id}','${seq.noteTitle}','${seq.noteDesc}')">Edit</a>
							<a class="btn btn-danger-small" href="javaScript:operationNote('delete','${seq.id}')">Delete</a>
						</td>
						</tr>
						<tr><td style="border-top:1px solid #CCC;" colspan="2"></td></tr>
					#{/list}
					</table>
				#{/if}
				</div>
			</div>
		</div>
	</div>
	<div id="ajax-content"></div>
</div>

<div class="modal fade" id="addEditmedication" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
				<h4 class="modal-title" id="myModalLabel">ADD NEW MEDICATION</h4>
			</div>
			<div class="modal-body">
				<table>
					<tr><td colspan="2">NEW MEDICATION INFORMATION</td></tr>
					<tr>
						<td>Generic Name</td>
						<td><input type="text" class="form-control"/></td>
					</tr>
					<tr>
						<td>Brand Name</td>
						<td><input type="text" class="form-control"/></td>
					</tr>
					<tr>
						<td>Frequency</td>
						<td>
							<select class="form-control">
								<option>3 Pill's daily</option>
								<option>2 Pill's daily</option>
								<option>1 Pill daily</option>
								<option>1 Pill weekly</option>
							</select>
						</td>
					</tr>
					<tr>
						<td>Prescribing Physician</td>
						<td>
							<select class="form-control">
								<option>Dr. A</option>
								<option>Dr. B</option>
								<option>Dr. C</option>
							</select>
						</td>
					</tr>
					<tr>
						<td>Special Intrsuctions</td>
						<td><textarea class="otherDetails" style=" height: 60px;min-width: 385px;max-width: 385px;width: 385px;"></textarea></td>
					</tr>
				</table>
      		</div>
      		<div class="modal-footer">
        		<button type="button" class="btn btn-default" data-dismiss="modal">Save</button>
      		</div>
		</div>
	</div>
</div>

<div class="modal fade" id="addEditAppointment" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog modal-lg">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
				<h4 class="modal-title" id="myModalLabel">ADD NEW APPOINTMENT</h4>
			</div>
			<div class="modal-body">
				<p class="editNote"><span class="btn btn-default-small">CURRENT DATA:</span> <span style="font-size: 20px;">Thursday May 10th 2014 9AM - LUPECTOMY |</span> IF THIS IS NOT CORRECT, COMPLETE THE FORM BELOW</p>
				<table style="width: 100%">
					<tr><td colspan="2">APPOINTMENT INFORMATION</td></tr>
					<tr>
						<td nowrap="nowrap">Purpose of Appointment</td>
						<td><select class="form-control">
								<option>Invasive Ductal Carcinoma</option>
							</select></td>
					</tr>
					<tr>
						<td>Time</td>
						<td><select class="form-control">
								<option>9 AM</option><option>10 AM</option><option>11 AM</option><option>12 Noon</option><option>1 PM</option><option>2 PM</option>
								<option>3 PM</option><option>4 PM</option><option>5 PM</option><option>6 PM</option>
							</select></td>
					</tr>
					<tr>
						<td>Date</td>
						<td><input type="text" class="form-control"/></td>
					</tr>
					<tr>
						<td>Center</td>
						<td><input type="text" class="form-control"/></td>
					</tr>
					<tr>
						<td>Physician/Nurse</td>
						<td><select class="form-control">
								<option>Dr. A</option>
								<option>Dr. B</option>
								<option>Dr. C</option>
							</select></td>
					</tr>
					<tr>
						<td>Address1</td>
						<td><input type="text" class="form-control"/></td>
					</tr>
					<tr>
						<td>Address2</td>
						<td><input type="text" class="form-control"/></td>
					</tr>					
					<tr>
						<td>City</td>
						<td><input type="text" class="form-control"/></td>
					</tr>							
					<tr>
						<td>State</td>
						<td><select class="form-control">
								<option>New York</option>
							</select></td>
					</tr>
				</table>
      		</div>
      		<div class="modal-footer">
        		<button type="button" class="btn btn-default" data-dismiss="modal">SAVE</button>
      		</div>
		</div>
	</div>
</div>

<div class="modal fade" id="addEditCareTeam" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
				<h4 class="modal-title" id="myModalLabel">ADD NEW CARE TEAM</h4>
			</div>
			<div class="modal-body">
				<table style="width: 100%">
					<tr><td colspan="2">NEW CARE TEAM INFORMATION</td></tr>
					<tr>
						<td nowrap="nowrap">Type of Care Team</td>
						<td><select class="form-control">
								<option>Oncology</option>
							</select></td>
					</tr>
					<tr>
						<td>Center/Clinic Name</td>
						<td><input type="text" class="form-control"/></td>
					</tr>
					<tr>
						<td>Address1</td>
						<td><input type="text" class="form-control"/></td>
					</tr>
					<tr>
						<td>Address2</td>
						<td><input type="text" class="form-control"/></td>
					</tr>					
					<tr>
						<td>City</td>
						<td><input type="text" class="form-control"/></td>
					</tr>							
					<tr>
						<td>State</td>
						<td><select class="form-control">
								<option>New York</option>
							</select></td>
					</tr>
				</table>
      		</div>
      		<div class="modal-footer">
        		<button type="button" class="btn btn-default" data-dismiss="modal">SAVE</button>
      		</div>
		</div>
	</div>
</div>
<div class="modal fade" id="addEditCareMemberTeam" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
				<h4 class="modal-title" id="myModalLabel">ADD NEW CARE TEAM</h4>
			</div>
			<div class="modal-body">
				<table style="width: 100%">
					<tr><td colspan="2">NEW CARE TEAM INFORMATION</td></tr>
					<tr>
						<td nowrap="nowrap">Type of Care Team</td>
						<td><select class="form-control">
								<option>Oncology</option>
							</select></td>
					</tr>
					<tr>
						<td>Center/Clinic Name</td>
						<td><input type="text" class="form-control"/></td>
					</tr>
					<tr>
						<td>Address1</td>
						<td><input type="text" class="form-control"/></td>
					</tr>
					<tr>
						<td>Address2</td>
						<td><input type="text" class="form-control"/></td>
					</tr>					
					<tr>
						<td>City</td>
						<td><input type="text" class="form-control"/></td>
					</tr>							
					<tr>
						<td>State</td>
						<td><select class="form-control">
								<option>New York</option>
							</select></td>
					</tr>
				</table>
      		</div>
      		<div class="modal-footer">
        		<button type="button" class="btn btn-default" data-dismiss="modal">SAVE</button>
      		</div>
		</div>
	</div>
</div>

<div class="modal fade" id="addEditNote" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
   <div class="modal-dialog modal-m">
   <div class="modal-content col-xs-12 col-sm-12">
   #{form @CarePatien.noteOperation() , id:'noteForm' }
      	<input type="hidden" name="operation" />
      	<input type="hidden" name="id" />
   		<input type="hidden" name="patientId" value="${patientId}"/>
    	
      		<div class="modal-header">
        		<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        		<h4 class="modal-title" id="myModalLabel">NEW NOTE</h4>
      		</div>
        	<div class="modal-body" style="float:left;display:block;">
        	<table>
        		<tr>
        			<td>TITLE/LABEL</td>
        			<td>
        			<div class="input-group">
									<input type="text" name="title" class="form-control" style="width: 400px;" required/>
									<span class="input-group-addon has-error"><i class="fa fa-star"></i></span>
					    		</div>
								<div class="help-block with-errors"></div>
        				</td>
        		</tr>
        		<tr>
        			<td>Note&nbsp;</td>
        			<td>
        			<div class="input-group">
        				<textarea class="form-control" style="height: 120px;width:425px;max-width: 425px;" name="description"></textarea> 
        				</div>
        			</td>
        		</tr>
        	</table>
    		</div>
     		<div class="modal-footer col-xs-12 col-sm-12" >
       			<button type="submit" class="btn btn-default" data-next="3">&nbsp;&nbsp;&nbsp;&nbsp; ADD NEW NOTE &nbsp;&nbsp;&nbsp;&nbsp;</button>
    		</div>
      
      #{/form}
		</div>
	</div>
</div>



<div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" id="addRadiationTreatment">
	<div class="modal-dialog modal-lg">
	 <div class="modal-content col-xs-12 col-sm-12 panel-info">
			  			<div class="modal-header">
        		<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        		<h4 class="modal-title" id="myModalLabel">ADD NEW TREATMENT</h4>
      		</div>
        	<div class="modal-body">
                    <form class="form-horizontal d_form" role="form">
                       <div class="form-group">
						<label class="col-sm-2 d_labl  ">Type of Radiation</label>
						<div class="col-sm-7">
							<input type="text" class="form-control" placeholder="APBI" data-toggle="tooltip" data-placement="bottom" title="Tooltip for name">
						</div>
					</div>
                       <div class="form-group">
						<label class="col-sm-2 d_labl ">Dose</label>
						<div class="col-sm-7">
							<input type="text" class="form-control" placeholder="60gy	" data-toggle="tooltip" data-placement="bottom" title="Tooltip for name">
						</div>
					</div>
                       <div class="form-group">
						<label class="col-sm-2 d_labl ">Schedule</label>
						<div class="col-sm-7">
							<select class="populate placeholder form-control" name="country">
									<option value="">5X Weekly</option>
									<option value="fr">3X Weekly</option>
									<option value="de">6X Weekly</option>
								</select>
						</div>
					</div>
                       <div class="form-group">
						<label class="col-sm-2 d_labl ">Dates</label>
						<div class="col-sm-7">
							<input type="text" id="input_date" class="form-control" style="width: 50px;float: left;margin-right: 10px;" placeholder="MM" size="2">
                            <input type="text" id="input_date" class="form-control" style="width: 50px;float: left;margin-right: 10px;" placeholder="DD" size="2">
                            <input type="text" id="input_date" class="form-control" style="width: 70px;float: left;margin-right: 10px;" placeholder="YYYY" size="4">
                            <span style="float:left;margin-right:10px;">-</span>
                            <input type="text" id="input_date" class="form-control" style="width: 50px;float: left;margin-right: 10px;" placeholder="MM" size="2">
                            <input type="text" id="input_date" class="form-control" style="width: 50px;float: left;margin-right: 10px;" placeholder="DD" size="2">
                            <input type="text" id="input_date" class="form-control" style="width: 70px;float: left;margin-right: 10px;" placeholder="YYYY" size="4">
						</div>
					</div>
                       <div class="form-group">
						<label class="col-sm-2 d_labl ">Side Effects</label>
						<div class="col-sm-7">
                        <div style="margin-bottom:12px; color:#999;"><i style="color:#C30;" class="fa fa-times"></i> Pain</div>
                            <select class="populate placeholder form-control" name="country">
									<option value="">Fatigue</option>
									<option value="fr">Demo</option>
									<option value="de">Demo</option>
								</select>
						</div>
					</div>
                       <div class="form-group">
						<label class="col-sm-2 d_labl ">Note</label>
						<div class="col-sm-7">
                        <textarea class="form-control" style="width:475px;"></textarea>
						</div>
					</div>
                    <br>
                    <div class="modal-footer">
						<div class="col-sm-7 col-sm-offset-5">
							<button type="submit" class="btn btn-primary d_btn-blue">SUBMIT NEW TREATMENT</button>
						</div>
					</div>
                    </form>
              </div>           
		</div>
	</div>
</div>
 
   
<div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" id="addChemoTreatment">
	<div class="modal-dialog modal-lg">
	 <div class="modal-content col-xs-12 col-sm-12 panel-info">
			  			<div class="modal-header">
        		<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        		<h4 class="modal-title" id="myModalLabel">ADD NEW TREATMENT</h4>
      		</div>
        	<div class="modal-body">
	<div class="dialogModal_content">
     <div class="row"> 
	 <div class="col-md-12 panel-info">
			  			<div class="content-box-large box-with-header">
				  			<div>

                                <div class="row">
									<div class="col-sm-12"> 
                                    <div class="distress_01"><h3>NEW CHEMOTHERPAY TREATMENT</h3></div><br>
                    <form class="form-horizontal d_form" role="form">
                                    
                       <div class="form-group">
						<label class="col-sm-2 d_labl  ">Generic Name</label>
						<div class="col-sm-7">
							<input type="text" class="form-control" placeholder="APBI" data-toggle="tooltip" data-placement="bottom" title="Tooltip for name">
						</div>
					</div>
                    
                       <div class="form-group">
						<label class="col-sm-2 d_labl ">Brand Name</label>
						<div class="col-sm-7">
							<input type="text" class="form-control" placeholder="60gy	" data-toggle="tooltip" data-placement="bottom" title="Tooltip for name">
						</div>
					</div>
                    
                       <div class="form-group">
						<label class="col-sm-2 d_labl ">Schedule</label>
						<div class="col-sm-7">
							<select class="populate placeholder form-control" name="country">
									<option value="">5X Weekly</option>
									<option value="fr">3X Weekly</option>
									<option value="de">6X Weekly</option>
								</select>
						</div>
					</div>
                    <div class="form-group">
						<label class="col-sm-2 d_labl ">Dose Reduction</label>
						<div class="col-sm-7">
							<select class="populate placeholder form-control" name="country">
									<option value="">50%</option>
									<option value="fr">20%</option>
									<option value="de">10%</option>
								</select>
						</div>
					</div>
                       <div class="form-group">
						<label class="col-sm-2 d_labl ">Date</label>
						<div class="col-sm-7">
							<input type="text" id="input_date" class="form-control" placeholder="DD" style="width:50px;float:left;margin-right:10px;"/>
                            <input type="text" id="input_date" class="form-control" placeholder="MM" style="width:50px;float:left;margin-right:10px;"/>
                           	<input type="text" id="input_date" class="form-control" placeholder="YYYY" style="width:70px;float:left;margin-right:10px;"/>
						</div>
					</div>
                       <div class="form-group">
						<label class="col-sm-2 d_labl ">Side Effects</label>
						<div class="col-sm-7">
                           <div style="margin-bottom:12px; color:#999;"><i style="color:#C30;" class="fa fa-times"></i> Pain</div>
                            <select class="populate placeholder form-control" name="country">
									<option value="">Fatigue</option>
									<option value="fr">Demo</option>
									<option value="de">Demo</option>
								</select>
						</div>
					</div>
                       <div class="form-group">
						<label class="col-sm-2 d_labl ">Note</label>
						<div class="col-sm-7">
                        <textarea class="form-control" rows="5">                        
                        
                        </textarea>
						</div>
					</div>
                    <div class="modal-footer">
						<div class="col-sm-7 col-sm-offset-5">
							<button type="submit" class="btn btn-primary d_btn-blue">SUBMIT NEW TREATMENT</button>
						</div>
					</div>
                    </form>
                        </div>           
   								</div>
							</div>
						</div>
			  		</div>				
				 </div>
				</div>
              </div>           
		</div>
	</div>
</div>


<div class="modal fade" id="addEditCaner" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
   <div class="modal-dialog modal-lg">
   <div class="modal-content col-xs-12 col-sm-12">
      	<input type="hidden" name="operation" />
      	<input type="hidden" name="id" />
   		<input type="hidden" name="patientId" value="${patientId}"/>
      		<div class="modal-header">
        		<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        		<h4 class="modal-title" id="myModalLabel">EDIT CANCER TYPE</h4>
      		</div>
        	<div class="modal-body">
        	<p class="editNote"><span class="btn btn-default-small">CURRENT DATA:</span> <span style="font-size: 20px;">ER+, PR+, HER2- |</span> IF THIS IS NOT CORRECT, COMPLETE THE FORM BELOW</p>
        	
        	<table style="border: 1px solid #ccc; margin-top: 30px; width: 100%;">
        		<tr>
        			<td colspan="2"><h4 class="modal-title" id="myModalLabel">CANCER TYPE INFORMATION</h4></td>
        		</tr>
        		<tr>
        			<td style="width: 50%; border-right: 1px solid #CCC; padding-right: 20px;"><table style="width:100%;">
        		<tr>
        			<td><span style="line-height: 16px;">Hormone and Her2 Status</span></td>
        			<td>
        			<div class="input-group">
						<select class="form-control">
        					<option>ER+</option>
        					<option>ER-</option>
        				</select>
        				</div>
        				<div class="input-group" style="margin: 5px 0;">
        				<select class="form-control">
        					<option>PR+</option>
        					<option>PR-</option>
        				</select>
        				</div>
        				<div class="input-group">
        				<select class="form-control">
        					<option>HER2+</option>
        					<option>HER2-</option>
        				</select>
        				</div>
        				</td>
        		</tr>
        		<tr>
        			<td>Type&nbsp;</td>
        			<td>
        			<div class="input-group">
        				<select class="form-control">
        					<option>Invasive Ductal Carcinoma</option>
        				</select>
        				</div>
        			</td>
        		</tr>
        		<tr>
        			<td>Recurrence&nbsp;</td>
        			<td>
        			<div class="input-group">
        				<select class="form-control">
        					<option>NO</option>
        					<option>YES</option>
        				</select>
        				</div>
        			</td>
        		</tr>
        		<tr>
        			<td>Symptoms&nbsp;</td>
        			<td>
        			<div class="input-group">
        				Lump in Breast
        				</div>
        			</td>
        		</tr>
        		<tr>
        			<td>Side Effects&nbsp;</td>
        			<td>
        			<div class="input-group">
        				<select class="form-control">
        					<option>Rash on Breast</option>
        					<option>Other</option>
        				</select>
        				</div>
        			</td>
        		</tr>
        		</table></td>
        			<td style="width:50%;vertical-align: top;padding-left: 20px;">
        			Aditional Comments<br/>
        				<textarea style=" height: 300px;width: 360px;"></textarea>
        			</td>
        		</tr>
        	</table>
    		</div>
     		<div class="modal-footer col-xs-12 col-sm-12" >
       			<button type="submit" class="btn btn-default" data-next="3">&nbsp;&nbsp;&nbsp;&nbsp; UPDATE DATA &nbsp;&nbsp;&nbsp;&nbsp;</button>
    		</div>
		</div>
	</div>
</div>



<div id="diagnosis-edit-form" title="Edit Diagnosis Info">
    <div style="padding: 5px; font-size: 12px;">
        <div style="padding: 3px;">
            <span style="display:inline-block; width: 200px;">Disease</span>
            <span>
                <select id="disease">
                    <option></option>
                    #{list items:diseases, as:'disease'}
                    <option value="${disease.id}">${disease.name}</option>
                    #{/list}
                </select>
            </span>
        </div>
        <div style="padding: 3px;">
            <span style="display:inline-block; width: 200px;">First Diagnosed</span>
            <span>
                <input type="text" id="first-diagnosed">
            </span>
        </div>
        <div id="er_div" style="padding: 3px;">
            <span style="display:inline-block; width: 200px;">Hormone and Her2 Status</span>
            <span>
                <select id="er">
                    <option value="na"></option>
                    <option value="yes">ER+</option>
                    <option value="no">ER-</option>
                </select>
            </span>
        </div>
        <div id="pr_div" style="padding: 3px;">
            <span style="display:inline-block; width: 200px;"></span>
            <span>
                <select id="pr">
                    <option value="na"></option>
                    <option value="yes">PR+</option>
                    <option value="no">PR-</option>
                </select>
            </span>
        </div>
        <div id="her2_div" style="padding: 3px;">
            <span style="display:inline-block; width: 200px;"></span>
            <span>
                <select id="her2">
                    <option value="na"></option>
                    <option value="yes">HER2+</option>
                    <option value="no">HER2-</option>
                </select>
            </span>
        </div>
        <div id="stage_div" style="padding: 3px;">
            <span style="display:inline-block; width: 200px;">Stage</span>
            <span>
                <select id="stage">
                    <option></option>
                    #{list items:stages, as:'stage'}
                    <option value="${stage.id}">${stage.name}</option>
                    #{/list}
                </select>
            </span>
        </div>
        <div id="brca_div" style="padding: 3px;">
            <span style="display:inline-block; width: 200px;">BRCA+</span>
            <span>
                <select id="brca">
                    <option value="na"></option>
                    <option value="yes">Yes</option>
                    <option value="no">No</option>
                </select>
            </span>
        </div>
        <div style="padding: 3px;">
            <span style="display:inline-block; width: 200px;">Date of Birth</span>
            <span>
                <input type="text" id="dob">
            </span>
        </div>
        <div style="padding: 3px;">
            <span style="display:inline-block; width: 200px;">Phone</span>
            <span>
                <input type="text" id="phone">
            </span>
        </div>
        <div style="padding: 3px;">
            <span style="display:inline-block; width: 200px;">Support Contact</span>
            <span>
                <input type="text" id="ec1name">
            </span>
        </div>
        <div style="padding: 3px;">
            <span style="display:inline-block; width: 200px;">Support Contact Phone</span>
            <span>
                <input type="text" id="ec1number">
            </span>
        </div>
    </div>
</div>

<script type="text/javascript">
$('#diagnosis-edit-form').dialog({
	autoOpen: false,
	width: 500,
	buttons: [{
		text: "Update Data",
		click: function() {
			careTeamController.evtMsgHandler('update_diagnosis_data');
		}
	}]
});

$('#first-diagnosed').datepicker({
	dateFormat: "yy-mm-dd"
});
$('#dob').datepicker({
    dateFormat: "yy-mm-dd"
});

$('#disease').change(function() {
	var breastCancerId = ${breastCancerId};
	var disease_id = $(this).val();
	if (disease_id != breastCancerId) {  
		$('#er_div').hide();
		$('#pr_div').hide();
		$('#her2_div').hide();
		$('#stage_div').hide();
		$('#brca_div').hide();
	}
	else {
		$('#er_div').show();
        $('#pr_div').show();
        $('#her2_div').show();
        $('#stage_div').show();
        $('#brca_div').show();
	}
});



var careTeamController = (function() {
	var breastCancerId = ${breastCancerId};
    var diagnosis = function(domElement) {
    	var patientId = $(domElement).attr("patient_id");
    	
    	$.post("/carepatien/diagnosisjson", {
    		   patientId: patientId
    	}, function(data) {
    		if ("diseaseId" in data) {
    		  $('#disease').val(data.diseaseId);
    		  if (data.breastCancerId == data.diseaseId) {
    			  if ("stageId" in data) {
    				  $('#stage').val(data.stageId);
    			  }
    			  $('#er').val(data.er);
    			  $('#pr').val(data.pr);
    			  $('#her2').val(data.her2);
    			  $('#brca').val(data.brca);
    		  }
    		}
            if ("firstDiagnosed" in data) {
                $('#first-diagnosed').val(data.firstDiagnosed);
    		}
    		if ("dateOfBirth" in data) {
    			$('#dob').val(data.dateOfBirth);
    		}
    		if ("Phone" in data) {
    			$("#phone").val(data.Phone);
    		}
    		if ("supportName" in data) {
    			$('#ec1name').val(data.supportName);
    		}
    		if ("supportNumber" in data) {
    			$('#ec1number').val(data.supportNumber);
    		}
    		
    		$('#diagnosis-edit-form').dialog("open");
            $('#diagnosis-edit-form').attr("patient_id", patientId);
            $('#disease').change();	
    	}, "json");
    };
    
    var updateDiagnosisData = function() {
    	var patientId = $('#diagnosis-edit-form').attr("patient_id");
    	// collect data and send
    	var tmpFunc = #{jsAction @CarePatien.updateDiagnosis(':patientId', ':diseaseId', ':dateOfDiagnosis', ':dob', ':phone', ':supportName', ':supportNumber') /}
    	var diseaseId = $('#disease').val();
    	var dateOfDiagnosis = $('#first-diagnosed').val();
    	var dob = $('#dob').val();
    	var phone = $('#phone').val();
    	var supportName = $('#ec1name').val();
    	var supportNumber = $('#ec1number').val();
    	var params = {
	        'patientId': patientId, 
	        'diseaseId': diseaseId, 
	        'dateOfDiagnosis': dateOfDiagnosis, 
	        'dob' : dob, 
	        'phone' : phone, 
	        'supportName' : supportName, 
	        'supportNumber' : supportNumber
        };
    	var url = tmpFunc(params);
    	if (diseaseId == breastCancerId) {
    		url += '&diseaseInfo.er=' + $('#er').val();
    		url += '&diseaseInfo.pr=' + $('#pr').val();
    		url += '&diseaseInfo.her2=' +  $('#her2').val();
    		url += '&diseaseInfo.stage_id=' + $('#stage').val();
    		url += '&diseaseInfo.brca=' + $('#brca').val();
    	}
    	$.post(url, function(htmlText) {
    		$('#ui-tabs-6').html(htmlText);
    	});
    	$('#diagnosis-edit-form').dialog("close");
    };

    var msgMap = {
        'diagnosis': diagnosis,
        'update_diagnosis_data': updateDiagnosisData
    };
    function evtMsgHandler(msg, domElement, params) {
        var func = msgMap[msg];
        if (typeof func !== 'undefined') {
            func(domElement, params);
        }
    }
    return {        
        evtMsgHandler: evtMsgHandler    
    };
})();


</script>

<script><!--
$(document).ready(function() {
	$("#tabs").tabs({
	      beforeLoad: function( event, ui ) {
	        ui.jqXHR.error(function() {
	          ui.panel.html("Couldn't load this tab. We'll try to fix this as soon as possible." );
	        });
	      }
	});
	$('body').on('click', 'button.medicationBtn', function() {
		operationMedication('add');
	});
	$('body').on('click', 'button.noteBtn', function() {
		operationNote('add');
	});
	
	$('body').on('click', 'button.appointmentBtn', function() {
		operationAppointment('add');
	});
	
	$('body').on('click', 'button.careTeamBtn', function() {
		operationCareTeam('add');
	});
	
	/* $('body').on('click', 'button.careTeamMemberBtn', function(event) {
		 event.stopPropagation(); // this is
		    event.preventDefault(); // the magic
		operationCareTeamMember('add');
	}); */
	
	// Load Sparkline plugin and run callback for draw Sparkline charts for dashboard(top of dashboard + plot in tables)
	LoadSparkLineScript(DrawSparklineDashboardNew);
});
operationMedication = function(operation) {
	if(operation == 'edit') {
		$('#addEditmedication').modal();
	} else if(operation == 'delete') {
		
	} else {
		$('#addEditmedication').modal();
	}
}
operationNote = function(operation,id,title,desc) {
	if(operation == 'edit') {
		$("#myModalLabel").html("EDIT NOTE");
		$("#noteForm input[name='operation']").val("edit");
		$("#noteForm input[name='id']").val(id);
		$("#noteForm input[name='title']").val(title);
		$("#noteForm textarea[name='description']").val(desc);
		$('#addEditNote').modal();
	} else if(operation == 'delete') {
		if(confirm('Do you want to delete the note')) {
			$("#noteForm input[name='operation']").val("delete");
			$("#noteForm input[name='id']").val(id);
			$("#noteForm").submit();
		}
	} else {
		$("#myModalLabel").html("ADD NOTE");
		$("#noteForm input[name='operation']").val("add");
		$("#noteForm input[name='id']").val("0");
		$("#noteForm input[name='title']").val("");
		$("#noteForm textarea[name='description']").val("");
		$('#addEditNote').modal();
	}
}
operationAppointment = function(operation, id) {
	if(operation == 'edit') {
		$('#addEditAppointment .editNote').show();
		$('#addEditAppointment').modal();
	} else if(operation == 'delete') {
		if(confirm('Do you want to delete the note')) {
			alert('deleting the appointment');			
		}
	} else {
		$('#addEditAppointment .editNote').hide();
		$('#addEditAppointment').modal();
	}
}
operationCareTeam = function(operation, id) {
	$('#addEditCareTeam').modal();
}

operationCareTeamMember = function(operation, id) {
// 	$('#addEditCareTeam').modal();
	$('#addEditCareMemberTeam').modal();
}
operationRadiationTreatment = function(operation, id) {
	$('#addRadiationTreatment').modal();
}
operationChemoTreatment = function(operation, id) {
	$('#addChemoTreatment').modal();
}

operationCancer = function(operation, id) {
	$('#addEditCaner').modal();
}


function DrawSparklineDashboardNew(){
// 	setInterval(SparklineLoop, 1000);
	var sparkline_table = [ [1,341], [2,464], [4,564], [5,235], [6,335], [7,535], [8,642], [9,342], [10,765] ];
	$('.td-graph').each(function(){
		var arr = $.map( sparkline_table, function(val, index) {
			return [[val[0], SmallChangeVal([val[1]])]];
		});
		$(this).sparkline( arr ,
			{defaultPixelsPerValue: 13, minSpotColor: null, maxSpotColor: null, spotColor: null,
			height: 35,fillColor: false, lineWidth: 2, lineColor: '#FFF'});
		});
	var sparkline_table = [ [1,641], [2,364], [4,564], [5,735], [6,235], [7,435], [8,342], [9,742], [10,465] ];
	$('.td-symp').each(function(){
		var arr = $.map( sparkline_table, function(val, index) {
			return [[val[0], SmallChangeVal([val[1]])]];
		});
		$(this).sparkline( arr ,
			{defaultPixelsPerValue: 13, minSpotColor: null, maxSpotColor: null, spotColor: null,
			height: 35,fillColor: false, lineWidth: 2, lineColor: '#FFF'});
		});
}
--></script>